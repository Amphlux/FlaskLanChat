# extensions/user_profile.py
import dev4_organized
def setup(command_processor):
    def profile_command(args, sender, channel, form_data=None, initial_prompt=''):
        from V3.server import users_db
        target_username = args.strip() or sender
        user = next((u for u in users_db.values() if u['username'] == target_username), None)
        if not user:
            return f"User {target_username} not found."
        return f"**{user['username']}'s Profile**\nAvatar: {user['avatar_url'] or 'None'}\nBio: {user['bio'] or 'No bio set'}"

    command_processor.register_command('profile', profile_command)
